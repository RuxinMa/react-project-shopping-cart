{"ast":null,"code":"import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import cartItems from'../../cartItems';var url='https://course-api.com/react-useReducer-cart-project';var initialState={cartItems:cartItems,amount:0,total:0,isLoading:true};export var getCartItems=createAsyncThunk('cart/getCartItems',function(){return fetch(url).then(function(resp){return resp.json();}).catch(function(err){return console.log(err);});});var cartSlice=createSlice({name:'cart',initialState:initialState,reducers:{clearCart:function clearCart(state){state.cartItems=[];},removeItem:function removeItem(state,action){var itemId=action.payload;// the remove item id \nstate.cartItems=state.cartItems.filter(function(item){return item.id!==itemId;});},increase:function increase(state,_ref){var payload=_ref.payload;var CartItem=state.cartItems.find(function(item){return item.id===payload.id;});CartItem.amount=CartItem.amount+1;},// deconstruct payload from action\ndecrease:function decrease(state,_ref2){var payload=_ref2.payload;var CartItem=state.cartItems.find(function(item){return item.id===payload.id;});CartItem.amount=CartItem.amount-1;},calculateTotals:function calculateTotals(state){var amount=0;var total=0;state.cartItems.forEach(function(item){amount+=item.amount;total+=item.amount*item.price;});state.amount=amount;state.total=total;}},extraReducers:function extraReducers(builder){builder.addCase(getCartItems.pending,function(state){state.isLoading=true;}).addCase(getCartItems.fulfilled,function(state,action){state.CartItem=action.payload;state.isLoading=false;}).addCase(getCartItems.rejected,function(state){state.isLoading=false;});}// extraReducers: {\n//   [getCartItems.pending]:(state) => {\n//     state.isLoading = true\n//   },\n//   [getCartItems.fulfilled]:(state, action) => {\n//     state.CartItem = action.payload;\n//     state.isLoading = false\n//   },\n//   [getCartItems.rejected]:(state) => {\n//     state.isLoading = false\n//   },\n// }\n});// console.log(cartSlice);\nvar _cartSlice$actions=cartSlice.actions,clearCart=_cartSlice$actions.clearCart,removeItem=_cartSlice$actions.removeItem,increase=_cartSlice$actions.increase,decrease=_cartSlice$actions.decrease,calculateTotals=_cartSlice$actions.calculateTotals;export{clearCart,removeItem,increase,decrease,calculateTotals};export default cartSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","cartItems","url","initialState","amount","total","isLoading","getCartItems","fetch","then","resp","json","catch","err","console","log","cartSlice","name","reducers","clearCart","state","removeItem","action","itemId","payload","filter","item","id","increase","CartItem","find","decrease","calculateTotals","forEach","price","extraReducers","builder","addCase","pending","fulfilled","rejected","actions","reducer"],"sources":["/Users/chenjingwen/Desktop/React/05-shopping-cart/src/features/cart/cartSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport cartItems from '../../cartItems';\n\nconst url = 'https://course-api.com/react-useReducer-cart-project';\n\nconst initialState = {\n  cartItems: cartItems,\n  amount: 0,\n  total: 0,\n  isLoading: true,\n};\n\nexport const getCartItems = createAsyncThunk('cart/getCartItems', () => {\n  return fetch(url)\n    .then((resp) => resp.json())\n    .catch((err) => console.log(err));\n});\n\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n\n    clearCart:(state) => {\n      state.cartItems = [];\n    },\n\n    removeItem: (state, action) => {\n      const itemId = action.payload; // the remove item id \n      state.cartItems = state.cartItems.filter((item) => item.id !== itemId);\n    },\n\n    increase: (state, { payload }) => {\n      const CartItem = state.cartItems.find((item) => item.id === payload.id);\n      CartItem.amount = CartItem.amount + 1;\n    }, // deconstruct payload from action\n\n    decrease: (state, { payload }) => {\n      const CartItem = state.cartItems.find((item) => item.id === payload.id);\n      CartItem.amount = CartItem.amount - 1;\n    },\n\n    calculateTotals: (state) => {\n      let amount = 0;\n      let total = 0;\n      state.cartItems.forEach((item) => {\n        amount += item.amount\n        total += item.amount * item.price\n      });\n      state.amount = amount;\n      state.total = total;\n    }\n  },\n\n  extraReducers: (builder) => {\n    builder\n      .addCase(getCartItems.pending, (state) => {\n        state.isLoading = true\n      })\n      .addCase(getCartItems.fulfilled, (state, action) => {\n        state.CartItem = action.payload;\n        state.isLoading = false\n      })\n      .addCase(getCartItems.rejected, (state) => {\n        state.isLoading = false\n      })\n  },\n\n  // extraReducers: {\n  //   [getCartItems.pending]:(state) => {\n  //     state.isLoading = true\n  //   },\n  //   [getCartItems.fulfilled]:(state, action) => {\n  //     state.CartItem = action.payload;\n  //     state.isLoading = false\n  //   },\n  //   [getCartItems.rejected]:(state) => {\n  //     state.isLoading = false\n  //   },\n  // }\n});\n\n// console.log(cartSlice);\nexport const { clearCart, removeItem, increase, decrease, calculateTotals } = cartSlice.actions;\n\nexport default cartSlice.reducer;"],"mappings":"AAAA,OAASA,WAAW,CAAEC,gBAAgB,KAAQ,kBAAkB,CAChE,MAAOC,UAAS,KAAM,iBAAiB,CAEvC,GAAMC,IAAG,CAAG,sDAAsD,CAElE,GAAMC,aAAY,CAAG,CACnBF,SAAS,CAAEA,SAAS,CACpBG,MAAM,CAAE,CAAC,CACTC,KAAK,CAAE,CAAC,CACRC,SAAS,CAAE,IACb,CAAC,CAED,MAAO,IAAMC,aAAY,CAAGP,gBAAgB,CAAC,mBAAmB,CAAE,UAAM,CACtE,MAAOQ,MAAK,CAACN,GAAG,CAAC,CACdO,IAAI,CAAC,SAACC,IAAI,QAAKA,KAAI,CAACC,IAAI,EAAE,GAAC,CAC3BC,KAAK,CAAC,SAACC,GAAG,QAAKC,QAAO,CAACC,GAAG,CAACF,GAAG,CAAC,GAAC,CACrC,CAAC,CAAC,CAEF,GAAMG,UAAS,CAAGjB,WAAW,CAAC,CAC5BkB,IAAI,CAAE,MAAM,CACZd,YAAY,CAAZA,YAAY,CACZe,QAAQ,CAAE,CAERC,SAAS,CAAC,mBAACC,KAAK,CAAK,CACnBA,KAAK,CAACnB,SAAS,CAAG,EAAE,CACtB,CAAC,CAEDoB,UAAU,CAAE,oBAACD,KAAK,CAAEE,MAAM,CAAK,CAC7B,GAAMC,OAAM,CAAGD,MAAM,CAACE,OAAO,CAAE;AAC/BJ,KAAK,CAACnB,SAAS,CAAGmB,KAAK,CAACnB,SAAS,CAACwB,MAAM,CAAC,SAACC,IAAI,QAAKA,KAAI,CAACC,EAAE,GAAKJ,MAAM,GAAC,CACxE,CAAC,CAEDK,QAAQ,CAAE,kBAACR,KAAK,MAAkB,IAAdI,QAAO,MAAPA,OAAO,CACzB,GAAMK,SAAQ,CAAGT,KAAK,CAACnB,SAAS,CAAC6B,IAAI,CAAC,SAACJ,IAAI,QAAKA,KAAI,CAACC,EAAE,GAAKH,OAAO,CAACG,EAAE,GAAC,CACvEE,QAAQ,CAACzB,MAAM,CAAGyB,QAAQ,CAACzB,MAAM,CAAG,CAAC,CACvC,CAAC,CAAE;AAEH2B,QAAQ,CAAE,kBAACX,KAAK,OAAkB,IAAdI,QAAO,OAAPA,OAAO,CACzB,GAAMK,SAAQ,CAAGT,KAAK,CAACnB,SAAS,CAAC6B,IAAI,CAAC,SAACJ,IAAI,QAAKA,KAAI,CAACC,EAAE,GAAKH,OAAO,CAACG,EAAE,GAAC,CACvEE,QAAQ,CAACzB,MAAM,CAAGyB,QAAQ,CAACzB,MAAM,CAAG,CAAC,CACvC,CAAC,CAED4B,eAAe,CAAE,yBAACZ,KAAK,CAAK,CAC1B,GAAIhB,OAAM,CAAG,CAAC,CACd,GAAIC,MAAK,CAAG,CAAC,CACbe,KAAK,CAACnB,SAAS,CAACgC,OAAO,CAAC,SAACP,IAAI,CAAK,CAChCtB,MAAM,EAAIsB,IAAI,CAACtB,MAAM,CACrBC,KAAK,EAAIqB,IAAI,CAACtB,MAAM,CAAGsB,IAAI,CAACQ,KAAK,CACnC,CAAC,CAAC,CACFd,KAAK,CAAChB,MAAM,CAAGA,MAAM,CACrBgB,KAAK,CAACf,KAAK,CAAGA,KAAK,CACrB,CACF,CAAC,CAED8B,aAAa,CAAE,uBAACC,OAAO,CAAK,CAC1BA,OAAO,CACJC,OAAO,CAAC9B,YAAY,CAAC+B,OAAO,CAAE,SAAClB,KAAK,CAAK,CACxCA,KAAK,CAACd,SAAS,CAAG,IAAI,CACxB,CAAC,CAAC,CACD+B,OAAO,CAAC9B,YAAY,CAACgC,SAAS,CAAE,SAACnB,KAAK,CAAEE,MAAM,CAAK,CAClDF,KAAK,CAACS,QAAQ,CAAGP,MAAM,CAACE,OAAO,CAC/BJ,KAAK,CAACd,SAAS,CAAG,KAAK,CACzB,CAAC,CAAC,CACD+B,OAAO,CAAC9B,YAAY,CAACiC,QAAQ,CAAE,SAACpB,KAAK,CAAK,CACzCA,KAAK,CAACd,SAAS,CAAG,KAAK,CACzB,CAAC,CAAC,CACN,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACF,CAAC,CAAC,CAEF;AACO,uBAAuEU,SAAS,CAACyB,OAAO,CAAhFtB,SAAS,oBAATA,SAAS,CAAEE,UAAU,oBAAVA,UAAU,CAAEO,QAAQ,oBAARA,QAAQ,CAAEG,QAAQ,oBAARA,QAAQ,CAAEC,eAAe,oBAAfA,eAAe,CAAuB,+DAEhG,cAAehB,UAAS,CAAC0B,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}